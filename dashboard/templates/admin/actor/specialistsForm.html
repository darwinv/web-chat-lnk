{% extends 'admin/base.html' %}
{% load i18n static %}


{% block main_content_row %}

    <form class="" action="{% url 'dashboard:actor-specialists-create' %}" method="POST" >
        {% csrf_token %}
        
        {{ form.non_field_errors }}
        <div class="form-group input-form-control col-xs-12">
            {% include 'admin/lib/_frame_profile_img.html' %}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.first_name.errors }}
            {{ form.first_name.label_tag }}
            {{ form.first_name }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.last_name.errors }}
            {{ form.last_name.label_tag }}
            {{ form.last_name }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.email_exact.errors }}
            {{ form.email_exact.label_tag }}
            {{ form.email_exact }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.telephone.errors }}
            {{ form.telephone.label_tag }}
            {{ form.telephone }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.cellphone.errors }}
            {{ form.cellphone.label_tag }}
            {{ form.cellphone }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.document_type.errors }}
            {{ form.document_type.label_tag }}
            {{ form.document_type }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.document_number.errors }}
            {{ form.document_number.label_tag }}
            {{ form.document_number }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.ruc.errors }}
            {{ form.ruc.label_tag }}
            {{ form.ruc }}
        </div>        
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.category.errors }}
            {{ form.category.label_tag }}
            {{ form.category }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.department.errors }}
            {{ form.department.label_tag }}
            {{ form.department }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.province.errors }}
            {{ form.province.label_tag }}
            {{ form.province }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.district.errors }}
            {{ form.district.label_tag }}
            {{ form.district }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.bussiness_name.errors }}
            {{ form.bussiness_name.label_tag }}
            {{ form.bussiness_name }}
        </div>
        <div class="form-group input-form-control col-xs-12 col-sm-6 col-md-3">
            {{ form.type_specialist.errors }}
            {{ form.type_specialist.label_tag }}
            {{ form.type_specialist }}
        </div>
        <hr>
        <div class="col-xs-12 text-center">
            <input type="submit" name="submit" class="btn btn-lightBlue" value="{% trans 'save'|title %}">

            <a href="{% url 'dashboard:actor-specialists-list' %}" class="btn btn-default">{% trans 'go back'|title %}</a>
        </div>
    </form>
{% endblock main_content_row %}

















{% block extra_head %}
  <link rel="stylesheet" href='{% static "cropper/dist/cropper.css" %}' >
    <style>
    .cropper-view-box,
    .cropper-face {
      border-radius: 50%;
      outline: none;
    }
    .content-frame-profile-img {
        text-align: center;
        float: left;
    }
    #frame-profile-img {
        border: 1px solid rgba(0, 0, 0, 0.19);
        border-radius: 50%;
    }
    #frame-profile-img, #frame-profile-img img, #frame-profile-img canvas {
        border-radius: 50%;
        width: 200px;
    }    
    canvas {
        margin: 0px 0px -6px 0px;
    }

  </style>
{% endblock extra_head %}


{% block extra_foot %}
  <!-- Scripts -->
  <script src='{% static "cropper/dist/cropper.min.js" %}' ></script>
  <script>
    $(function () {
      var $image      = $('#image');
      var $modal      = $('#modal');
      var $frame      = $('#frame-profile-img');
      var $inputImage = $('#inputImage');
      var btnSave     = '#save-model-imgProfile';
      var getCroppedCanvas;
      var fileTempModal

      $image.hide();
      $modal.on('shown.bs.modal', function () {
        $image
          .attr('src', fileTempModal)
          .show()
          .cropper({
            cropBoxResizable: true,
            guides: false,
            aspectRatio: 1,
            ready: function () {
              croppable = true;
            }
          });  
      }).on('hidden.bs.modal', function () {
        $image.cropper('destroy').hide();
      })

      
      $(document).on('click',btnSave,function(){
        event.preventDefault();
        $modal.modal('hide');        
        getCroppedCanvas  = $image.cropper('getCroppedCanvas',{ width: 200, height: 200 });
        $frame.html(getCroppedCanvas);
      });

      // Import image
      var URL = window.URL || window.webkitURL;  
      if (URL) {
        $inputImage.change(function () {
          var files = this.files;
          var file;
          if (files && files.length) {
            file = files[0];
            if (/^image\/\w+$/.test(file.type)) {
              uploadedImageType = file.type;
              if (fileTempModal) {
                URL.revokeObjectURL(fileTempModal);
              }
              fileTempModal = URL.createObjectURL(file);
              $modal.modal('show');
              $inputImage.val('');
            } else {
              window.alert('{% trans "please choose an image file."|title %}');
            }
          }
        });
      } else {
        $inputImage.prop('disabled', true).parent().addClass('disabled');
      }


    });
  </script>
{% endblock extra_foot %}